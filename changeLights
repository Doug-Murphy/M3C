function setLightsColor(lights, color)
  for lightKey, light in pairs(lights) do
    light.setColor(color)
  end
end

os.loadAPI("M3C/utils")
term.clear()

local sensor = utils.findAndWrap("openperipheral_sensor")
local lights = utils.findAndWrapAll("thermalexpansion_light")
local players = {}
local playerPreferences = {}

playerPreferences["Duu82"] = 0xFF0000
playerPreferences["leftyj"] = 0x0000FF

while true do
  local colorToSet = nil
  players = sensor.getPlayers()
  for playerKey, playerData in pairs(players) do
    colorToSet = playerPreferences[playerData.name]
  end
  
  if colorToSet == nil then
    colorToSet = 0x000000
  end
  
  setLightsColor(lights, colorToSet)
  
  sleep(1)
end
